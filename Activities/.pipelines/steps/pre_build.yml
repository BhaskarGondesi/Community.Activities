parameters:
  BuildConfiguration: "Release"
  BuildPlatform: "AnyCPU"
  NuGetVersionSpec: "5.8.0"
  rootPath: ""
  versionReference: ""
  versionNumber: ""
  versionSuffix: ""

steps:
- task: PowerShell@1
  displayName: "Set Build Version"
  inputs:
    scriptType: "inlineScript"
    ${{ if eq(parameters.versionSuffix, '') }}:
     inlineScript: |
       $version = "${{ parameters.versionNumber }}" 
       Write-Host "$version" 
       Write-Host "##vso[build.updatebuildnumber]$version"
    ${{ if ne(parameters.versionSuffix, '') }}:
     inlineScript: |
       $version = "${{ parameters.versionNumber }}-${{ parameters.versionSuffix }}" 
       Write-Host "$version" 
       Write-Host "##vso[build.updatebuildnumber]$version"

- task: PowerShell@1
  displayName: "Print variables"
  condition: always()
  continueOnError: true
  inputs:
    scriptType: "inlineScript"
    inlineScript: "Write-Host \"Variables for current build:\" \n
      Get-ChildItem ENV:*"